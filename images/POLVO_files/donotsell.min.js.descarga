window.dsrManager={initConfiguration:function(e){Object.keys(e).forEach((function(o){window[o]=e[o]}))}};var mReceivedInterval={"prefill-dsr-form":[],"process-gpc-signal":[]},iframeIsReady=!1,domainName=getDomainName(window.location.hostname);"undefined"!=typeof clientIdentifier&&(domainName=clientIdentifier,globalDnsDeployment=!1);var jsonID="1745848081",configurationFile=globalDnsDeployment?"dsr-configuration_"+jsonID+".json":domainName+"-dsr-configuration_"+jsonID+".json",cacheClear=(configurationFile=globalDnsDeployment?"dsr-configuration_"+jsonID+".json":domainName+`-dsr-configuration${this.getKeyedJSONID(domainName)}.json`,"1745848081"),language="undefined"!=typeof lang&&""!==lang?lang:""!==document.documentElement.lang?document.documentElement.lang:"en";function loadConfiguration(){return sendHttpRequest("https://"+claripCdnHost+"/"+clientName+"/donotsell/"+configurationFile+"?"+cacheClear,"GET")}function sendHttpRequest(e,o){const t=new XMLHttpRequest;t.open(o,e,!1),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded");try{t.send()}catch(e){return void loadManager({status:404})}t.readyState!==XMLHttpRequest.DONE?t.onreadystatechange=()=>{t.readyState===XMLHttpRequest.DONE&&loadManager(t)}:loadManager(t)}function getDomainName(e){return e.substring(e.lastIndexOf(".",e.lastIndexOf(".")-1)+1)}function loadManager(e){var o;if(200===e.status&&window.dsrManager.initConfiguration(JSON.parse(e.response)),g(!0),function(){var e=navigator.globalPrivacyControl,o="undefined"!=typeof claripDNSSCustomerData?claripDNSSCustomerData:{},t=void 0!==o.loggedIn&&o.loggedIn,n=l(doNotSellCookieName)==doNotSellCookieValue.toString(),a=void 0!==o.email?o.email:"";if(e||!t||n)return;var i="https://"+clientName+".clarip.com/donotsell/api/check",r=new FormData;r.append("email",a);var c=new XMLHttpRequest;c.open("POST",i),c.onload=function(){JSON.parse(c.response).data.hasCustomerOptedOut&&s(doNotSellCookieName,doNotSellCookieValue,doNotSellCookieExpirationAge)},c.onerror=function(){done(c.response)},c.send(r)}(),window.addEventListener("message",(function(e){var o="https://"+claripCdnHost;if(e.origin!==o)return;if(void 0===e.data)return;var t=e.data.messageType;if(void 0===t)return;if("prefill-dsr-form"===t||"process-gpc-signal"===t||"check-gpc-signal"===t||"show-loader"===t||"hide-loader"===t||"set-gpc-attribute"===t||"force-stop"===t){for(let e of mReceivedInterval[t])clearInterval(e);iframeIsReady=!0}else"close-dns-manager"===t?r():"proceed-to-dsr-form"===t?(enableEnforcementScope?p(e.data.stateSelected)&&s(doNotSellCookieName,doNotSellCookieValue,doNotSellCookieExpirationAge):s(doNotSellCookieName,doNotSellCookieValue,doNotSellCookieExpirationAge),"function"==typeof claripDNSSSubmissionWebCallback&&claripDNSSSubmissionWebCallback(),e.data.redirectToSuccessPage?(r(),window.open(dnsSubmissionUrl+(void 0!==e.data.redirectURL?e.data.redirectURL:""),"_blank")):e.data.showSuccessMessageInPopup||r()):"execute-gpc-dnss-submission-callback"===t?(s(doNotSellCookieName,doNotSellCookieValue,doNotSellCookieExpirationAge),"function"==typeof claripDNSSSubmissionWebCallback&&claripDNSSSubmissionWebCallback()):"trigger-opt-in-request"===t?(c(doNotSellCookieName),c("clarip_gpc"),e.data.showSuccessMessageInPopup||r()):"set-dnss-cookie"===t&&s(doNotSellCookieName,doNotSellCookieValue,doNotSellCookieExpirationAge)}),!1),document.addEventListener("click",(function(e){const o=e.target;if("undefined"!=typeof useShadowRootForDnssLinkSelector&&!0===useShadowRootForDnssLinkSelector)var t=document.querySelector(dnssShadowRootNodeSelector).shadowRoot.querySelectorAll(doNotSellLinkSelector);else t=document.querySelectorAll(doNotSellLinkSelector);for(var n=0;n<t.length;n++)if(o.isEqualNode(t[n])&&"function"!=typeof o.onclick)return o.onclick=function(){return a(),!1},e.preventDefault(),a(),!1;return!1})),function(){var e=getDomainName(window.location.hostname);"undefined"!=typeof clientIdentifier&&(e=clientIdentifier,globalDnsDeployment=!1);var o=document.createElement("div");o.classList.add("clarip-dns-manager"),document.getElementsByTagName("body")[0].appendChild(o);var t=(navigator.language||navigator.userLanguage).toLowerCase().replace("-","_").substr(0,2),n=document.documentElement.lang,a=void 0!==language?"en"!==language?"-"+language:"":void 0!==n?"en"!==n?"-"+n:"":void 0!==t&&"en"!==t?"-"+t:"",i="undefined"!=typeof dnsControllerType&&"option-1"===dnsControllerType?globalDnsDeployment?"controller"+a+".html":e+"-controller"+a+".html":globalDnsDeployment?"dsr-controller"+a+".html":e+"-dsr-controller"+a+".html",r='<iframe onload="initFormSettings(this)" id="clarip-dns-manager-component" title="Clarip Do Not Sell Share Interface" src="https://'+claripCdnHost+"/"+clientName+"/donotsell/"+i+"?"+cacheClear+"&start="+e+"&client="+clientName+"&brand="+window.location.hostname+"&globalDnsDeployment="+globalDnsDeployment+"&pageUrl="+encodeURIComponent(window.location.href)+'" width="100%" height="100%" frameborder="no" scrolling="yes" style="position: relative; margin-bottom: -20px;"></iframe>';o.innerHTML='<div class="clarip-dns-manager-content">'+r+"</div>"}(),o="undefined"!=typeof enableForceStopTracking&&!0===enableForceStopTracking&&function(){let e=!1;if("undefined"!=typeof enableForceStopTracking&&!0===enableForceStopTracking){var o=localStorage.getItem("countryCode"),t=localStorage.getItem("regionCode");null===o&&null===t?function(e,o,t,n,a){var i=new XMLHttpRequest;i.open(e,o,n),i.onload=function(){a(!1,i.response)},i.onerror=function(){a(!0,i.response)},"GET"===e?i.send():(i.setRequestHeader("Content-Type","application/json"),i.send(t))}("GET","https://"+claripHost+"/clarip/api/geolocation/current","",!1,(function(o,t){if(o)return!1;var n=JSON.parse(t),a=n.countryCode,i=n.regionCode;localStorage.setItem("countryCode",a),localStorage.setItem("regionCode",i),e=!!m(a,i)})):e=!!m(o,t)}else e=!0;return e}(),window.claripforceStopState=o,f({messageType:"force-stop",attr:{forceStopState:o}}),"undefined"!=typeof useShadowRootForDnssLinkSelector&&!0===useShadowRootForDnssLinkSelector)var t=document.querySelector(dnssShadowRootNodeSelector).shadowRoot.querySelectorAll(doNotSellLinkSelector);else t=document.querySelectorAll(doNotSellLinkSelector);for(var n=0;n<t.length;n++)t[n].onclick=function(e){return e.stopPropagation(),e.preventDefault(),a(),!1};(""!==doNotSellLinkSelector&&"undefined"!=typeof dataRightsRequestLinkEnabled&&dataRightsRequestLinkEnabled&&document.querySelectorAll(doNotSellLinkSelector).length>0&&function(){if("undefined"==typeof dataRightsRequestLinkLayout)return;var e=dataRightsRequestLinkLayout;"none"===e&&(e="horizontal");var o="false";"undefined"!=typeof dataRightsRequestParentSelector&&(o=dataRightsRequestParentSelector);var t=document.querySelectorAll(doNotSellLinkSelector)[0],n={href:standardDsrFormUrl,innerText:"Data Rights Request"};["class","style"].forEach((function(o){if(t.attributes.hasOwnProperty(o)&&(n[o]=t.attributes[o].textContent),"style"===o){var a="vertical"===e?"block":"inline";if(n[o]+=";display: "+a+";",n[o].indexOf("padding")<0){var i="vertical"===e?";padding: 5px 0;":";padding: 0 5px;";n[o]+=i}}}));var a=document.createElement("a");Object.keys(n).forEach((function(e){var o=e;"class"===e&&(o="className"),a[o]=n[e]}));var i=a,r=t.nextElementSibling;if(""!==o&&"true"===o){var l=t.parentElement,s=l.cloneNode();s.innerHtml="",s.appendChild(a),r=l.nextElementSibling,i=s}null===r?t.parentElement.appendChild(i):r.parentElement.insertBefore(i,r)}(),document.querySelectorAll(doNotSellLinkSelector).length>0)&&(document.querySelectorAll(doNotSellLinkSelector)[0].style.cssText+="cursor:pointer !important;");function a(){u()}function i(){document.querySelector(".clarip-dns-manager").classList.add("show-dns-manager","clarip-dns-manager-position");var e="undefined"!=typeof claripDNSSCustomerData?claripDNSSCustomerData:{};f(void 0!==e.loggedIn&&e.loggedIn?{messageType:"show-loader"}:{messageType:"hide-loader"}),"undefined"!=typeof dynamicDSRFormFieldsPrefill&&!0===dynamicDSRFormFieldsPrefill&&function(){var e="undefined"!=typeof claripDNSSCustomerData?claripDNSSCustomerData:{};e.isDnssCaptured=l(doNotSellCookieName)==doNotSellCookieValue.toString(),e.isGPCSignalEnabled=navigator.globalPrivacyControl;var o={messageType:"prefill-dsr-form",attr:{claripDNSSCustomerData:e}};f(o)}(),g(),"undefined"==typeof dynamicDSRFormFieldsPrefill||dynamicDSRFormFieldsPrefill||navigator.globalPrivacyControl||f({messageType:"hide-loader"})}function r(){document.querySelector(".clarip-dns-manager").classList.remove("clarip-dns-manager-position","show-dns-manager")}function l(e){for(var o=e+"=",t=decodeURI(document.cookie).split(";"),n=0;n<t.length;n++){for(var a=t[n];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(o))return a.substring(o.length,a.length)}return""}function s(e,o,t){var n=d(),a=new Date;a.setTime(a.getTime()+24*t*60*60*1e3);var i="expires="+a.toGMTString();document.cookie=e+"="+o+";domain="+n+";"+i+";path=/"}function c(e){var o=d();document.cookie=e+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+o}function d(){var e=location.hostname.split(".").reverse();return e.length=e.length-1,"."+e.reverse().join(".")}function u(){if("undefined"!=typeof enableDNSGeolocation&&!0===enableDNSGeolocation){var e=localStorage.getItem("countryCode"),o=localStorage.getItem("regionCode");null===e&&null===o?function(e){var o="https://"+claripHost+"/clarip/api/geolocation/current",t=new XMLHttpRequest;t.open("GET",o,!1),t.onload=function(){e(null,t.response)},t.onerror=function(){e(t.response)},t.send()}((function(e,o){if(e)return!1;var t=JSON.parse(o),n=t.countryCode,a=t.regionCode;localStorage.setItem("countryCode",n),localStorage.setItem("regionCode",a),u()})):!function(e,o){if("undefined"==typeof countryList||null===countryList||0===countryList.length||1===countryList.length&&""===countryList[0])return!0;return"undefined"==typeof regionList||null===regionList||0===regionList.length||1===regionList.length&&""===regionList[0]?countryList.includes(e.toUpperCase()):countryList.includes(e.toUpperCase())&&regionList.includes(o.toUpperCase())}(e,o)?window.location.href=standardDsrFormUrl:i()}else i()}function p(e){return"undefined"==typeof enforcementScopeRegionList||null===enforcementScopeRegionList||0===enforcementScopeRegionList.length||1===enforcementScopeRegionList.length&&""===enforcementScopeRegionList[0]||enforcementScopeRegionList.includes(e.toUpperCase())}function g(e=!1){var o=navigator.globalPrivacyControl;if(o){f({messageType:"set-gpc-attribute"});var t="undefined"!=typeof claripDNSSCustomerData?claripDNSSCustomerData:{},n=void 0!==t.loggedIn&&t.loggedIn,a=l(doNotSellCookieName)==doNotSellCookieValue.toString(),i=void 0!==t.state?t.state:"N/A";if(n&&enableEnforcementScope&&"N/A"!=i&&!p(i)&&"1"===l("clarip_enforcement_scope_gpc"))return void f({messageType:"hide-loader"});if(s("clarip_gpc",o.toString(),doNotSellCookieExpirationAge),s(doNotSellCookieName,doNotSellCookieValue,doNotSellCookieExpirationAge),n||!n&&!a){var r=!1;"undefined"!=typeof dynamicDSRFormFieldsPrefill&&(r=dynamicDSRFormFieldsPrefill),setTimeout((function(){f({messageType:e?"process-gpc-signal":"check-gpc-signal",attr:{claripDNSSCustomerData:t,automatic:e,dynamicFormPrefill:r}}),s("clarip_enforcement_scope_gpc",1,doNotSellCookieExpirationAge)}),1e3)}!n&&a&&f({messageType:"hide-loader"})}else c("clarip_gpc")}function f(e){var o=document.getElementById("clarip-dns-manager-component"),t=e.messageType;mReceivedInterval.hasOwnProperty(t)||(mReceivedInterval[t]=[]),iframeIsReady?o.contentWindow.postMessage(e,"*"):mReceivedInterval[t].push(setInterval((function(){o.contentWindow.postMessage(e,"*")}),1e3))}function m(e,o){return"undefined"==typeof forceStopTrackingCountryList||null===forceStopTrackingCountryList||0===forceStopTrackingCountryList.length||1===forceStopTrackingCountryList.length&&""===forceStopTrackingCountryList[0]||("undefined"==typeof forceStopTrackingRegionList||null===forceStopTrackingRegionList||0===forceStopTrackingRegionList.length||1===forceStopTrackingRegionList.length&&""===forceStopTrackingRegionList[0]?forceStopTrackingCountryList.includes(e.toUpperCase()):forceStopTrackingCountryList.includes(e.toUpperCase())&&forceStopTrackingRegionList.includes(o.toUpperCase()))}"undefined"!=typeof enableClaripDnssMetricsRecording&&!0===enableClaripDnssMetricsRecording&&recordDnssMetrics()}function initFormSettings(e){const o=e.contentDocument||e.contentWindow.document,t=isEnabledSpecialCharsValidation?"1":"0";o.getElementById("first-name").setAttribute("data-special-char-validation",t),o.getElementById("last-name").setAttribute("data-special-char-validation",t)}function getKeyedJSONID(e){let o=JSON.parse(['[["_2fa5e2fd8ab0b9fe75ae","1745848081"]]']);for(let t=0;t<o.length;t++){let[n,a]=o[t][0].split("_"),i="undefined"!=typeof clientIdentifier?a:n,r=o[t][1]?`_${o[t][1]}`:"";if(i===e)return r}return null}loadConfiguration();
