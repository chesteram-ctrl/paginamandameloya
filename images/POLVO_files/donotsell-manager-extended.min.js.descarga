var dnssModuleIntegrationSource,previousLoggedInState,isUserLoggedIn,isDnssCaptured,host="cdn.clarip.com",start=getQueryString("start",window.location.href),client=getQueryString("client",window.location.href),brand=getQueryString("brand",window.location.href),pageUrl=decodeURIComponent(getQueryString("pageUrl",window.location.href)),appWebView=getQueryString("appWebView",window.location.href);"true"==appWebView&&applyWebviewLogic(),hideLoader(!1);var checkIfDNSSIsSubmitted=!1,gpcRequestStatus=""===(enableGPCProcessing||"")?"not-planned":"planned",_gpcSignalEnabled=!1,Validator={isRequired:function(e){return""!==e},isBetween:function(e,t,n){return!(e<t||e>n)},isFirstNameValid:function(e){return/^\S[^0-9_!Ã‚Â¡?ÃƒÂ·?Ã‚Â¿/\\+=@#$%Ã‹â€&`^,"*(){}|~<>;:[\]]{1,}$/i.test(e)},isLastNameValid:function(e){return/^\S[^0-9_!Ã‚Â¡?ÃƒÂ·?Ã‚Â¿/\\+=@#$%Ã‹â€&`^,"*(){}|~<>;:[\]]{1,}$/i.test(e)},isEmailValid:function(e){return/^(?:[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-zA-Z0-9-]*[a-zA-Z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/.test(e)},isPhoneNumberValid:function(e){return/^[0-9()\-+ ]{0,20}$/.test(e)},isStreetAddressValid:function(e){var t=/^[a-zA-Z0-9\s,.'#-]*$/;return enableGlobalAddressFieldValidation&&(t=/^[\p{L}0-9\s,.'#\-]+$/u),t.test(e)},isCityValid:function(e){return/^\S[^0-9_!Ã‚Â¡?ÃƒÂ·?Ã‚Â¿/\\+=@#$%Ã‹â€&`^,"*(){}|~<>;:[\]]{1,}$/i.test(e)},isZIPValid:function(e){var t=/^[a-zA-Z0-9]{5,6}$/;return enableGlobalAddressFieldValidation&&(t=/^[A-Z0-9][A-Z0-9\- ]{2,11}[A-Z0-9]$/i),t.test(e)},checkFirstName:function(){var e=!1,t=document.getElementById("first-name");if(null!==t){var n=1*t.dataset.specialCharValidation,a=t.value;allowDNSSFormSubmissionWithBlankName||this.isRequired(a)?allowDNSSFormSubmissionWithBlankName||this.isBetween(a.replaceAll(" ","").length,1,100)?n&&!this.isFirstNameValid(a)?showInputValidatorError(t,firstNameErrValid):(showInputValidatorSuccess(t),e=!0):showInputValidatorError(t,firstNameErrLength):showInputValidatorError(t,firstNameErrEmpty)}else e=!0;return e},checkLastName:function(){var e=!1,t=document.getElementById("last-name");if(null!==t){var n=1*t.dataset.specialCharValidation,a=t.value;allowDNSSFormSubmissionWithBlankName||this.isRequired(a)?allowDNSSFormSubmissionWithBlankName||this.isBetween(a.replaceAll(" ","").length,1,100)?n&&!this.isLastNameValid(a)?showInputValidatorError(t,lastNameErrValid):(showInputValidatorSuccess(t),e=!0):showInputValidatorError(t,lastNameErrLength):showInputValidatorError(t,lastNameErrEmpty)}else e=!0;return e},checkEmail:function(){var e=!1,t=document.getElementById("email");if(null!==t){var n=t.value;this.isRequired(n)?this.isBetween(n.length,2,100)?this.isEmailValid(n)?(showInputValidatorSuccess(t),e=!0):showInputValidatorError(t,emailErrValid):showInputValidatorError(t,emailErrLength):showInputValidatorError(t,emailErrEmpty)}else e=!0;return e},checkPhoneNumber:function(){var e=!1,t=document.getElementById("phone-number");if(null!==t){var n=t.value;this.isRequired(n)?this.isBetween(n.length,10,20)?this.isPhoneNumberValid(n)?(showInputValidatorSuccess(t),e=!0):showInputValidatorError(t,phoneNumberErrValid):showInputValidatorError(t,phoneNumberErrLength):showInputValidatorError(t,phoneNumberErrEmpty)}else e=!0;return e},checkState:function(){var e=!1,t=document.getElementById("form-state");if(null!==t){var n=t.value;this.isRequired(n)?(showInputValidatorSuccess(t),e=!0):showInputValidatorError(t,stateErrRequired)}else e=!0;return e},checkStreetAddress:function(){var e=!1,t=document.getElementById("street-address");if(null!==t){var n=t.value;this.isRequired(n)?this.isBetween(n.length,4,100)?this.isStreetAddressValid(n)?(showInputValidatorSuccess(t),e=!0):showInputValidatorError(t,streetAddressErrValid):showInputValidatorError(t,streetAddressErrLength):showInputValidatorError(t,streetAddressErrEmpty)}else e=!0;return e},checkCity:function(){var e=!1,t=document.getElementById("city");if(null!==t){var n=t.value;this.isRequired(n)?this.isBetween(n.length,2,50)?this.isCityValid(n)?(showInputValidatorSuccess(t),e=!0):showInputValidatorError(t,cityNameErrValid):showInputValidatorError(t,cityNameErrLength):showInputValidatorError(t,cityNameErrEmpty)}else e=!0;return e},checkZIP:function(){var e=!1,t=document.getElementById("zip");if(null!==t){var n=t.value,a=this.isBetween(n.length,5,6);enableGlobalAddressFieldValidation&&(a=this.isBetween(n.length,4,12)),this.isRequired(n)?a?this.isZIPValid(n)?(showInputValidatorSuccess(t),e=!0):showInputValidatorError(t,zipErrValid):showInputValidatorError(t,zipErrLength):showInputValidatorError(t,zipErrEmpty)}else e=!0;return e}};function applyWebviewLogic(){document.getElementById("close-dns-manager").style.display="none",document.body.style.margin="0 auto"}function GridBuilder(e){var t,n,a=[domainLabel,parentLabel],s=1,o=e.length>10;this.init=function(){i(),l(),r(1),d(),c(),u()};var i=function(){for(var e=document.querySelector("#third-party-cookies-grid table thead"),t="<tr>",n=0;n<a.length;n++)t+="<th>"+a[n]+"</th>";t+="</tr>",e.innerHTML=t},l=function(){if(o){document.getElementById("third-party-cookies-grid-pagination-block").innerHTML='<span class="pagination-text">'+pagesLabel+':</span>\n<span id="prev-button" class="page-button outline-none">'+prevLabel+'</span>\n<span id="page-number" class="outline-none"></span>\n<span id="next-button" class="page-button outline-none">'+nextLabel+'</span><span id="pager-index"></span>',t=document.getElementById("prev-button"),n=document.getElementById("next-button"),document.querySelectorAll(".click-page-number");var e=document.getElementById("page-number");e.innerHTML="";for(var a=1;a<g()+1;a++)e.innerHTML+="<span class='click-page-number'>"+a+"</span>"}},r=function(a){var s=document.querySelector("#third-party-cookies-grid table tbody"),i=g();a<1&&(a=1),a>i-1&&(a=i),o&&(1===a?t.classList.add("pager-inactive-button"):t.classList.remove("pager-inactive-button")),o&&(a===i?n.classList.add("pager-inactive-button"):n.classList.remove("pager-inactive-button"));var l="";if(s.innerHTML="",0===e.length)l+="<tr class='no-data-row'><td colspan='2'>"+noCookiesInfoAvailable+"</td></tr>";else for(var r=10*(a-1);r<10*a&&r<e.length;r++)l+="<tr class='data-row'><td>"+e[r].domain+"</td><td>"+e[r].cookie_co+"</td></tr>";s.innerHTML=l;var c=document.getElementById("pager-index");o&&(c.innerHTML=a+" of "+i),d()},d=function(){if(o)for(var e=document.getElementById("page-number").getElementsByClassName("click-page-number"),t=0;t<e.length;t++)t===s-1?(e[t].style.border="0",e[t].style.fontWeight="700"):(e[t].style.border="1px solid #e6e6e6",e[t].style.fontWeight="normal")},c=function(){document.addEventListener("click",(function(e){"SPAN"===e.target.nodeName&&e.target.classList.contains("click-page-number")&&(s=e.target.textContent,r(s))}))},u=function(){o&&(t.addEventListener("click",m),n.addEventListener("click",p))},m=function(){s>1&&(s--,r(s))},p=function(){s<g()&&(s++,r(s))},g=function(){return Math.ceil(e.length/10)}}function closeDnsManager(){document.getElementById("close-dns-manager").addEventListener("click",(function(){resetDNSSManagerHtmlComponents();parent.postMessage({messageType:"close-dns-manager"},"*")}))}function addThirdPartyCookieSectionToggleHandler(){for(var e=document.getElementsByClassName("toggle-third-party-cookies-section"),t=0;t<e.length;t++)e[t].addEventListener("click",toggleThirdPartyCookieSection,!1)}function populateStateDropdownValues(){var e=[{code:"AL",name:"Alabama"},{code:"AK",name:"Alaska"},{code:"AZ",name:"Arizona"},{code:"AR",name:"Arkansas"},{code:"CA",name:"California"},{code:"CO",name:"Colorado"},{code:"CT",name:"Connecticut"},{code:"DE",name:"Delaware"},{code:"DC",name:"District of Columbia"},{code:"FL",name:"Florida"},{code:"GA",name:"Georgia"},{code:"HI",name:"Hawaii"},{code:"ID",name:"Idaho"},{code:"IL",name:"Illinois"},{code:"IN",name:"Indiana"},{code:"IA",name:"Iowa"},{code:"KS",name:"Kansas"},{code:"KY",name:"Kentucky"},{code:"LA",name:"Louisiana"},{code:"ME",name:"Maine"},{code:"MD",name:"Maryland"},{code:"MA",name:"Massachusetts"},{code:"MI",name:"Michigan"},{code:"MN",name:"Minnesota"},{code:"MS",name:"Mississippi"},{code:"MO",name:"Missouri"},{code:"MT",name:"Montana"},{code:"NE",name:"Nebraska"},{code:"NV",name:"Nevada"},{code:"NH",name:"New Hampshire"},{code:"NJ",name:"New Jersey"},{code:"NM",name:"New Mexico"},{code:"NY",name:"New York"},{code:"NC",name:"North Carolina"},{code:"ND",name:"North Dakota"},{code:"OH",name:"Ohio"},{code:"OK",name:"Oklahoma"},{code:"OR",name:"Oregon"},{code:"PA",name:"Pennsylvania"},{code:"PR",name:"Puerto Rico"},{code:"RI",name:"Rhode Island"},{code:"SC",name:"South Carolina"},{code:"SD",name:"South Dakota"},{code:"TN",name:"Tennessee"},{code:"TX",name:"Texas"},{code:"UT",name:"Utah"},{code:"VT",name:"Vermont"},{code:"VA",name:"Virginia"},{code:"WA",name:"Washington"},{code:"WV",name:"West Virginia"},{code:"WI",name:"Wisconsin"},{code:"WY",name:"Wyoming"}],t=document.getElementById("form-state");t||(t=document.createElement("select")),(a=document.createElement("option")).text="Select State",a.value="",a.selected=!0,a.disabled=!0,a.setAttribute("hidden",""),t.add(a);for(var n=0;n<e.length;n++){var a,s=e[n];(a=document.createElement("option")).text=s.name,a.value=s.code,t.add(a)}(a=document.createElement("option")).text="N/A",a.value="N/A",t.add(a)}function fetchCookieDetails(){fetch("GET","https://"+host+"/"+client+"/donotsell/configuration/"+start+".json","",(function(e,t){loadCookiesGrid(e?[]:JSON.parse(t))}))}function addFormSubmitButtonEventListeners(){document.querySelectorAll("#dsar-form button[type=submit]").forEach((function(e){e.addEventListener("click",(function(e){e.target.setAttribute("clicked",!0)}))}))}function enableSubmitButtons(){document.querySelectorAll("#dsar-form button[type=submit]").forEach((function(e){e.removeAttribute("disabled")}))}function addFormEventListeners(){var e=document.getElementById("dsar-form");e.addEventListener("input",debounce((function(e){switch(e.target.id){case"first-name":Validator.checkFirstName();break;case"last-name":Validator.checkLastName();break;case"email":Validator.checkEmail();break;case"phone-number":Validator.checkPhoneNumber();break;case"form-state":Validator.checkState();break;case"street-address":Validator.checkStreetAddress();break;case"city":Validator.checkCity();break;case"zip":Validator.checkZIP()}}))),e.addEventListener("submit",(function(e){if(e.preventDefault(),validateDSRForm()){var t=document.querySelector("#dsar-form button[type=submit]");t.setAttribute("disabled",!0);const e=(e,t)=>{!isUserLoggedIn&&!_gpcSignalEnabled&&makeFieldsOptionalForAnonymousNonGpcUser&&checkIfAllFormFieldsAreEmptyOnSubmission()?e():t()};if(enableOptInWorkflow){var n=t.id;"proceed-to-dsr-request"==n?e(submitAnonymousRequest,submitRequest):"trigger-opt-in-request"==n&&e(submitOptInAnonymousRequest,submitOptInRequest),document.querySelectorAll("#dsar-form button[type=submit]").forEach((function(e){e.removeAttribute("clicked")}))}else e(submitAnonymousRequest,submitRequest)}}))}function submitRequest(){var e=(navigator.language||navigator.userLanguage).toLowerCase().replace("-","_").substr(0,2),t=document.documentElement.lang,n="https://"+client+".clarip.com/donotsell/api/submit-request",a=document.getElementById("first-name"),s=document.getElementById("last-name"),o=document.getElementById("email"),i=document.getElementById("phone-number"),l=document.getElementById("form-state"),r=document.getElementById("captchaContainer"),d=document.getElementById("street-address"),c=document.getElementById("city"),u=document.getElementById("zip"),m=lang,p="anonymous",g="anonymous",h="anonymous@clarip.com",y="",f="N/A",b="N/A",I="N/A",S="N/A",v=null===l?"":l.value,E=new FormData;if(E.append("brand",brand),E.append("firstName",null===a?p:a.value),E.append("lastName",null===s?g:s.value),E.append("email",null===o?h:o.value),E.append("phoneNumber",null===i?y:i.value),E.append("state",null===l?f:l.value),E.append("streetAddress",null===d?b:d.value),E.append("city",null===c?I:c.value),E.append("zip",null===u?S:u.value),E.append("language",null!==m?m:null!==t?t:null!==e?e:"en"),E.append("browserSignature",generateUniqueGuid()),E.append("pageUrl",pageUrl),E.append("isUserLoggedIn",isUserLoggedIn),E.append("showAddressFields",showAddressFields?"1":"0"),null!==r){var B=r.querySelector('input[name="captchaCode"]');E.append("captchaCode",null!==B?B.value:""),E.append("useCaptchaOnForm",useCaptchaOnForm)}fetch("POST",n,E,(function(e,t){if(reloadCaptcha(),e)enableDNSSSubmissionMessageContainer(!1,!0);else{if(""!==t){var n=JSON.parse(t);if("success"!==n.status){if(void 0!==n.validation)for(var r in n.validation){var m=document.getElementById(r);null!==m&&"captcha-code"===r?m=showInputValidatorError(m,captchaErrInvalid):showInputValidatorError(m,n.validation[r])}return n&&(document.getElementById("techMessage").innerHTML=document.getElementById("techMessage").innerHTML+" "+n.message),document.getElementById("techMessage").style.display="block",document.getElementById("popup-failure-message-container").style.display="block",!1}document.getElementById("techMessage").innerHTML=techMessage,document.getElementById("techMessage").style.display="none",document.getElementById("popup-failure-message-container").style.display="none"}null!=document.getElementById("captcha_image")&&(document.getElementById("captcha_image").src="https://"+client+".clarip.com/securimage/securimage_show.php?"+Math.random(),captcha_image_audioObj.refresh(),this.blur()),null!==a&&(a.value=""),null!==s&&(s.value=""),null!==o&&(o.value=""),null!==i&&(i.value=""),null!==l&&(l.value="CA"),null!==d&&(d.value=""),null!==c&&(c.value=""),null!==u&&(u.value="");for(var p=document.getElementById("dsar-form").getElementsByClassName("form-control"),g=0;g<p.length;g++){var h=p[g].parentElement;h.classList.remove("success"),h.classList.remove("error")}showSuccessMessageInPopup&&enableDNSSSubmissionMessageContainer(!0,!0);var y={dnssSubmitted:!0};enableEnforcementScope&&(checkEnforcementScope(v)||(y={dnssSubmitted:!1})),"iOS"===dnssModuleIntegrationSource&&window.webkit.messageHandlers.claripDNSSCallback.postMessage(y),"android"===dnssModuleIntegrationSource&&claripDNSSCallback.postMessage(JSON.stringify(y)),"react-native"===dnssModuleIntegrationSource&&window.ReactNativeWebView.postMessage(JSON.stringify(y));var f="?thank_message_title="+thanksMessageTitle+"&thank_message="+thanksMessage,b={messageType:"proceed-to-dsr-form",stateSelected:v,redirectToSuccessPage:redirectToSuccessPage,redirectURL:f,showSuccessMessageInPopup:showSuccessMessageInPopup};parent.postMessage(b,"*")}enableSubmitButtons()}))}function submitAnonymousRequest(){showSuccessMessageInPopup&&enableDNSSSubmissionMessageContainer(!0,!0);var e={dnssSubmitted:!0};"iOS"===dnssModuleIntegrationSource&&window.webkit.messageHandlers.claripDNSSCallback.postMessage(e),"android"===dnssModuleIntegrationSource&&claripDNSSCallback.postMessage(JSON.stringify(e)),"react-native"===dnssModuleIntegrationSource&&window.ReactNativeWebView.postMessage(JSON.stringify(e));var t="?thank_message_title="+thanksMessageTitle+"&thank_message="+thanksMessage,n={messageType:"proceed-to-dsr-form",stateSelected:"N/A",redirectToSuccessPage:redirectToSuccessPage,redirectURL:t,showSuccessMessageInPopup:showSuccessMessageInPopup};parent.postMessage(n,"*"),enableSubmitButtons()}function submitGPCRequest(e,t=!1,n=!0){isUserLoggedIn=void 0!==e.loggedIn&&e.loggedIn;document.getElementById("captchaContainer");isUserLoggedIn?(firstName=void 0!==e.firstName?e.firstName:"",lastName=void 0!==e.lastName?e.lastName:"",email=void 0!==e.email?e.email:"",phoneNumber=void 0!==e.phoneNumber?e.phoneNumber:"",state=void 0!==e.state?e.state:"",streetAddress=void 0!==e.streetAddress?e.streetAddress:"",city=void 0!==e.city?e.city:"",zip=void 0!==e.zip?e.zip:"",""===state&&(state="N/A")):(firstName="GPC",lastName="GPC",email="gpc@clarip.com",phoneNumber="",state="N/A",streetAddress="N/A",city="N/A",zip="N/A",hideLoader(!0),hideFormFields(!1));var a="https://"+client+".clarip.com/donotsell/api/submit-request",s=(navigator.language||navigator.userLanguage).toLowerCase().replace("-","_").substr(0,2),o=document.documentElement.lang,i=lang,l=new FormData;if(l.append("brand",brand),l.append("firstName",firstName),l.append("lastName",lastName),l.append("email",email),l.append("phoneNumber",phoneNumber),l.append("state",state),"undefined"!=typeof streetAddress&&l.append("streetAddress",streetAddress),"undefined"!=typeof city&&l.append("city",city),"undefined"!=typeof zip&&l.append("zip",zip),l.append("browserSignature",generateUniqueGuid()),l.append("pageUrl",pageUrl),l.append("gpcFlag","true"),l.append("isUserLoggedIn",isUserLoggedIn),l.append("showAddressFields",showAddressFields?"1":"0"),l.append("language",null!==i?i:null!==o?o:null!==s?s:"en"),isUserLoggedIn){var r="https://"+client+".clarip.com/donotsell/api/check",d=new FormData;d.append("email",email),fetch("POST",r,d,(function(e,n){if(reloadCaptcha(),!e){var s=JSON.parse(n);if(!s.success){if(void 0!==s.validation)for(var o in s.validation){var i=document.getElementById(o);null!==i&&showInputValidatorError(i,s.validation[o])}return s&&(document.getElementById("techMessage").innerHTML=document.getElementById("techMessage").innerHTML+" "+s.message),document.getElementById("techMessage").style.display="block",document.getElementById("popup-failure-message-container").style.display="block",!1}if(document.getElementById("techMessage").innerHTML=techMessage,document.getElementById("techMessage").style.display="none",document.getElementById("popup-failure-message-container").style.display="none",null!=document.getElementById("captcha_image")&&(document.getElementById("captcha_image").src="https://"+client+".clarip.com/securimage/securimage_show.php?"+Math.random(),captcha_image_audioObj.refresh(),this.blur()),s.data.hasCustomerOptedOut)return void showDNSSDenialMessage();if(t&&(void 0===previousLoggedInState||previousLoggedInState===isUserLoggedIn))return void hideLoader(!0);hideLoader(!1),hideFormFields(!0),fetch("POST",a,l,(function(e,t){e||(checkIfDNSSIsSubmitted=!0,showDNSSDenialMessage()),gpcRequestStatus="finished"}))}}))}else processGPCRequestForAnonymousUser&&fetch("POST",a,l,(function(e,t){if(reloadCaptcha(),!e){var n=JSON.parse(t);if("success"!==n.status){if(void 0!==n.validation)for(var a in n.validation){var s=document.getElementById(a);showInputValidatorError(s,null!==s&&"captcha-code"===a?captchaErrInvalid:n.validation[a])}return n&&(document.getElementById("techMessage").innerHTML=document.getElementById("techMessage").innerHTML+" "+n.message),document.getElementById("techMessage").style.display="block",document.getElementById("popup-failure-message-container").style.display="block",!1}document.getElementById("techMessage").innerHTML=techMessage,document.getElementById("techMessage").style.display="none",document.getElementById("popup-failure-message-container").style.display="none",checkIfDNSSIsSubmitted=!0,null!=document.getElementById("captcha_image")&&(document.getElementById("captcha_image").src="https://"+client+".clarip.com/securimage/securimage_show.php?"+Math.random(),captcha_image_audioObj.refresh(),this.blur())}}))}function submitOptInRequest(e){var t="https://"+client+".clarip.com/donotsell/api/submit-opt-in-request",n=document.getElementById("first-name"),a=document.getElementById("last-name"),s=document.getElementById("email"),o=document.getElementById("phone-number"),i=document.getElementById("form-state"),l=document.getElementById("captchaContainer"),r=new FormData;if(r.append("brand",brand),r.append("firstName",null===n?"":n.value),r.append("lastName",null===a?"":a.value),r.append("email",null===s?"":s.value),r.append("phoneNumber",null===o?"":o.value),r.append("state","N/A"),r.append("browserSignature",generateUniqueGuid()),r.append("pageUrl",pageUrl),r.append("showAddressFields",showAddressFields?"1":"0"),null!==l){var d=l.querySelector('input[name="captchaCode"]');r.append("captchaCode",null!==d?d.value:""),r.append("useCaptchaOnForm",useCaptchaOnForm)}fetch("POST",t,r,(function(e,t){if(reloadCaptcha(),e)enableDNSSSubmissionMessageContainer(!1,!1);else{if(""!==t){var l=JSON.parse(t);if("success"!==l.status){if(void 0!==l.validation)for(var r in l.validation){var d=document.getElementById(r);null!==d&&showInputValidatorError(d,l.validation[r])}return l&&(document.getElementById("techMessage").innerHTML=document.getElementById("techMessage").innerHTML+" "+l.message),document.getElementById("techMessage").style.display="block",document.getElementById("popup-failure-message-container").style.display="block",!1}document.getElementById("techMessage").innerHTML=techMessage,document.getElementById("techMessage").style.display="none",document.getElementById("popup-failure-message-container").style.display="none"}null!=document.getElementById("captcha_image")&&(document.getElementById("captcha_image").src="https://"+client+".clarip.com/securimage/securimage_show.php?"+Math.random(),captcha_image_audioObj.refresh(),this.blur()),null!==n&&(n.value=""),null!==a&&(a.value=""),null!==s&&(s.value=""),null!==o&&(o.value=""),null!==i&&(i.value="CA");for(var c=document.getElementById("dsar-form").getElementsByClassName("form-control"),u=0;u<c.length;u++){var m=c[u].parentElement;m.classList.remove("success"),m.classList.remove("error")}showSuccessMessageInPopup&&enableDNSSSubmissionMessageContainer(!0,!1),checkIfDNSSIsSubmitted=!1;var p={messageType:"trigger-opt-in-request",showSuccessMessageInPopup:showSuccessMessageInPopup};parent.postMessage(p,"*")}enableSubmitButtons()}))}function submitOptInAnonymousRequest(){showSuccessMessageInPopup&&enableDNSSSubmissionMessageContainer(!0,!1),checkIfDNSSIsSubmitted=!1;var e={messageType:"trigger-opt-in-request",showSuccessMessageInPopup:showSuccessMessageInPopup};parent.postMessage(e,"*"),enableSubmitButtons()}function toggleThirdPartyCookieSection(){document.getElementById("collapse-third-party-cookies").classList.toggle("showComponent")}function loadCookiesGrid(e){new GridBuilder(e).init()}function validateDSRForm(){if(!isUserLoggedIn&&!_gpcSignalEnabled&&makeFieldsOptionalForAnonymousNonGpcUser&&checkIfAllFormFieldsAreEmptyOnSubmission())return!0;const e=[{validator:()=>Validator.checkFirstName(),id:"first-name"},{validator:()=>Validator.checkLastName(),id:"last-name"},{validator:()=>Validator.checkEmail(),id:"email"},{validator:()=>Validator.checkPhoneNumber(),id:"phone-number"},{validator:()=>Validator.checkStreetAddress(),id:"street-address"},{validator:()=>Validator.checkCity(),id:"city"},{validator:()=>Validator.checkState(),id:"form-state"},{validator:()=>Validator.checkZIP(),id:"zip"}];let t=!0,n=null;for(const a of e){const e=a.validator();if(t=t&&e,!e&&!n){const e=document.getElementById(a.id);e&&(n=e)}}return n&&n.focus(),t}function checkIfAllFormFieldsAreEmptyOnSubmission(){const e=document.getElementById("dsar-form").querySelectorAll("input");let t=!0;e.forEach((e=>{""!==e.value.trim()&&(t=!1)}));const n=document.getElementById("form-state"),a=null===n?"":n.value;return t&&""===a}function fetch(e,t,n,a){var s=new XMLHttpRequest;s.open(e,t),s.timeout=1e4,s.onload=function(){a(!1,s.response)},s.onerror=function(){a(!0,s.response)},s.ontimeout=function(){a(!0,s.response)},"GET"===e?s.send():s.send(n)}function debounce(e){var t,n=arguments.length<=1||void 0===arguments[1]?10:arguments[1];return function(){for(var a=arguments.length,s=Array(a),o=0;o<a;o++)s[o]=arguments[o];t&&clearTimeout(t),t=setTimeout((function(){e.apply(null,s)}),n)}}function showInputValidatorSuccess(e,t){var n=e.parentElement;n.classList.remove("error"),n.classList.add("success"),n.querySelector("small").textContent=""}function showInputValidatorError(e,t){var n=e.parentElement;n.classList.remove("success"),n.classList.add("error"),n.querySelector("small").textContent=t}function getQueryString(e,t){var n=t||window.location.href,a=new RegExp("[?&]"+e+"=([^&#]*)","i").exec(n);return a?a[1]:null}function getUserAgent(){return window.navigator.userAgent}function generateUniqueGuid(){var e=window.navigator,t=window.screen,n=e.mimeTypes.length;return n+=e.userAgent.replace(/\D+/g,""),n+=e.plugins.length,n+=t.height||"",n+=t.width||"",n+=t.pixelDepth||""}function resetDNSSManagerHtmlComponents(){document.getElementById("right-to-opt-out-container").style.display="block";var e=document.getElementById("custom-text-block-container");(e&&(e.style.display="block"),enableTpcSection)&&(document.getElementById("dns-manager-details").style.display="block");enableGPCSection&&(document.getElementById("gpc-signal-container").style.display="block");hideLoader(!1),hideFormFields(),resetDnssSubmissionMessageContainer(),enableOptInWorkflow&&(document.getElementById("trigger-opt-in-request").style.display="none")}function enableDNSSSubmissionMessageContainer(e,t){document.getElementById("right-to-opt-out-container").style.display="none";var n=document.getElementById("custom-text-block-container");(n&&(n.style.display="none"),enableTpcSection)&&(document.getElementById("dns-manager-details").style.display="none");enableGPCSection&&(document.getElementById("gpc-signal-container").style.display="none");hideFormFields(),enableOptInWorkflow&&(document.getElementById("trigger-opt-in-request").style.display="none"),resetDnssSubmissionMessageContainer(),e?t?document.getElementById("popup-success-message-container").style.display="block":document.getElementById("popup-opt-in-success-message-container").style.display="block":t?document.getElementById("popup-failure-message-container").style.display="block":document.getElementById("popup-opt-in-failure-message-container").style.display="block"}function hideLoader(e=!0){var t=document.getElementById("form-loader");t&&(t.style.display=e?"none":"flex")}function hideFormFields(e=!0){document.getElementById("form-fields").children.length>0?document.getElementById("customer-input").style.display=e?"none":"block":document.getElementById("customer-input").style.display="none",document.getElementById("form-fields").style.display=e?"none":"flex",document.getElementById("proceed-to-dsr-request").style.display=e?"none":"block"}function showDNSSDenialMessage(){hideFormFields(),hideLoader(),document.getElementById("dns-denial-message-container").style.display="block",enableOptInWorkflow&&(document.getElementById("trigger-opt-in-request").style.display="block")}function disableOptInView(){hideLoader(),hideFormFields(!1),document.getElementById("dns-denial-message-container").style.display="none",document.getElementById("trigger-opt-in-request").style.display="none"}function resetDnssSubmissionMessageContainer(){document.getElementById("popup-success-message-container").style.display="none",document.getElementById("popup-opt-in-success-message-container").style.display="none",document.getElementById("popup-failure-message-container").style.display="none",document.getElementById("popup-opt-in-failure-message-container").style.display="none"}function receiveMessageFromParent(e){if(void 0!==e.data){var t=e.data.messageType;if(void 0!==t){if("initiate-dnss-manager"===t)initiateDnssManager(e.data.attr.claripDNSSCustomerData,e.data.attr.prefillDSRFormFields);else if("prefill-dsr-form"===t){hideLoader(!1),document.getElementById("form-fields").style.display="none",document.getElementById("proceed-to-dsr-request").style.display="none",processPostedDataToClaripDNSSForm(e.data.attr.claripDNSSCustomerData)}else if("process-gpc-signal"===t||"check-gpc-signal"===t){processGPCSignal(e.data.attr.claripDNSSCustomerData,e.data.attr.automatic,e.data.attr.dynamicFormPrefill)}else if("hide-loader"===t)hideLoader(!0),hideFormFields(!1);else if("show-loader"===t)hideLoader(!1),hideFormFields(!0);else if("set-gpc-attribute"===t)_gpcSignalEnabled=!0;else if("force-stop"===t){var n=e.data.attr.forceStopState;"undefined"!=typeof claripCookieManager&&(claripCookieManager.$forceStopTracking=n,window.claripforceStopState=n,claripCookieManager.setToggle(),claripCookieManager.checkForClaripBlocker())}checkForEmptyForm()?document.getElementById("customer-input").style.display="none":document.getElementById("customer-input").style.display="block",parent.postMessage({messageType:t,status:"received"},"*")}}}function postDataToClaripDNSSForm(e){processPostedDataToClaripDNSSForm(e)}function processPostedDataToClaripDNSSForm(e){(previousLoggedInState=isUserLoggedIn,dnssModuleIntegrationSource=void 0!==e.source?e.source:"web",isUserLoggedIn=void 0!==e.loggedIn&&e.loggedIn,isDnssCaptured=void 0!==e.isDnssCaptured&&e.isDnssCaptured,isGPCSignalEnabled=void 0!==e.isGPCSignalEnabled&&e.isGPCSignalEnabled,checkIfOptInRequestIsSubmitted=enableOptInWorkflow&&!isDnssCaptured,"web"!==dnssModuleIntegrationSource&&(document.getElementById("close-dns-manager").style.display="none"),enableGPCProcessing&&enableGPCSection)&&(document.getElementById("gpc-signal-indicator").innerText=isGPCSignalEnabled?gpcSignalDetectedMessage:gpcSignalUndetectedMessage);if(!isUserLoggedIn)return clearFormFields(),hideLoader(),void hideFormFields(!1);if(firstName=void 0!==e.firstName?e.firstName:"",lastName=void 0!==e.lastName?e.lastName:"",email=void 0!==e.email?e.email:"",phoneNumber=void 0!==e.phoneNumber?e.phoneNumber:"",streetAddress=void 0!==e.streetAddress?e.streetAddress:"",city=void 0!==e.city?e.city:"",zip=void 0!==e.zip?e.zip:"",state=void 0!==e.state?e.state:"",fillInFormFields(firstName,lastName,email,phoneNumber,state,streetAddress,city,zip),"undefined"!=typeof showDenialMessageIfDSRSubmitted&&showDenialMessageIfDSRSubmitted){if(checkIfOptInRequestIsSubmitted)return void disableOptInView();if(checkIfDNSSIsSubmitted)return void showDNSSDenialMessage();var t="https://"+client+".clarip.com/donotsell/api/check",n=new FormData;n.append("email",email),fetch("POST",t,n,(function(e,t){if(!e&&JSON.parse(t).data.hasCustomerOptedOut){if(checkIfDNSSIsSubmitted=!0,showDNSSDenialMessage(),"web"===dnssModuleIntegrationSource){parent.postMessage({messageType:"set-dnss-cookie"},"*")}return}"not-planned"!==gpcRequestStatus&&isGPCSignalEnabled||(hideLoader(!0),hideFormFields(!1))}))}else isGPCSignalEnabled||(hideLoader(),hideFormFields(!1))}function fillInFormFields(e,t,n,a,s,o,i,l){var r=document.getElementById("first-name"),d=document.getElementById("last-name"),c=document.getElementById("email"),u=document.getElementById("phone-number"),m=document.getElementById("street-address"),p=document.getElementById("city"),g=document.getElementById("zip"),h=document.getElementById("form-state");null!==r&&""!==e&&null!=e&&(r.value=e,r.setAttribute("disabled",!0),hidePrefilledDSRFormFields&&(r.closest(".flex-item").style.display="none")),null!==d&&""!==t&&null!=t&&(d.value=t,d.setAttribute("disabled",!0),hidePrefilledDSRFormFields&&(d.closest(".flex-item").style.display="none")),null!==c&&""!==n&&null!=n&&(c.value=n,c.setAttribute("disabled",!0),hidePrefilledDSRFormFields&&(c.closest(".flex-item").style.display="none")),null!==u&&""!==a&&null!=a&&(u.value=a,u.setAttribute("disabled",!0),hidePrefilledDSRFormFields&&(u.closest(".flex-item").style.display="none")),null!==m&&""!==o&&null!=o&&(m.value=o,m.setAttribute("disabled",!0),hidePrefilledDSRFormFields&&(m.closest(".flex-item").style.display="none")),null!==p&&""!==i&&null!=i&&(p.value=i,p.setAttribute("disabled",!0),hidePrefilledDSRFormFields&&(p.closest(".flex-item").style.display="none")),null!==g&&""!==l&&null!=l&&(g.value=l,g.setAttribute("disabled",!0),hidePrefilledDSRFormFields&&(g.closest(".flex-item").style.display="none")),null!==h&&""!==s&&null!=s&&(h.value=s)}function clearFormFields(){var e=document.getElementById("first-name"),t=document.getElementById("last-name"),n=document.getElementById("email"),a=document.getElementById("phone-number"),s=document.getElementById("street-address"),o=document.getElementById("city"),i=document.getElementById("zip"),l=document.getElementById("form-state");null!==e&&(e.value="",e.removeAttribute("disabled",!1),e.closest(".flex-item").style.display="block"),null!==t&&(t.value="",t.removeAttribute("disabled",!1),t.closest(".flex-item").style.display="block"),null!==n&&(n.value="",n.removeAttribute("disabled",!1),n.closest(".flex-item").style.display="block"),null!==a&&(a.value="",a.removeAttribute("disabled",!1),a.closest(".flex-item").style.display="block"),null!==s&&(s.value="",s.removeAttribute("disabled",!1),s.closest(".flex-item").style.display="block"),null!==o&&(o.value="",o.removeAttribute("disabled",!1),o.closest(".flex-item").style.display="block"),null!==i&&(i.value="",i.removeAttribute("disabled",!1),i.closest(".flex-item").style.display="block"),null!==l&&(l.text="Select State",l.value="");let r=document.querySelectorAll(".form-group");for(let e of r)e.classList.remove("error"),e.classList.remove("success"),e.querySelector("small").textContent="";document.getElementById("dns-denial-message-container").style.display="none"}function processGPCSignal(e,t=!1,n=!0){"true"!==(enableGPCProcessing||"").toString()?n||(hideLoader(!0),hideFormFields(!1)):submitGPCRequest(e,!t,n)}function reloadCaptcha(){null!=document.getElementById("captchaContainer")&&("google_recaptcha_v2"==useCaptchaOnForm?grecaptcha.reset(window.globalCaptcha):"cloufdlare_turnstile"==useCaptchaOnForm&&turnstile.reset("#captchaContainer"))}function checkForEmptyForm(){const e=document.getElementById("dsar-form");if(!e)return!0;const t=e.querySelectorAll("input, select");if(0===t.length)return!0;const n=e.querySelectorAll("#form-fields")[0];if(n&&"none"===n.style.display)return!0;for(let e=0;e<t.length;e++){if("none"!==t[e].closest(".flex-item").style.display)return!1}return!0}function checkEnforcementScope(e){return"undefined"==typeof enforcementScopeRegionList||null===enforcementScopeRegionList||0===enforcementScopeRegionList.length||1===enforcementScopeRegionList.length&&""===enforcementScopeRegionList[0]||enforcementScopeRegionList.includes(e.toUpperCase())}function initiateDnssManager(e,t){(isUserLoggedIn=void 0!==e.loggedIn&&e.loggedIn,isDnssCaptured=void 0!==e.isDnssCaptured&&e.isDnssCaptured,isGPCSignalEnabled=void 0!==e.isGPCSignalEnabled&&e.isGPCSignalEnabled,enableGPCProcessing&&enableGPCSection)&&(document.getElementById("gpc-signal-indicator").innerText=isGPCSignalEnabled?gpcSignalDetectedMessage:gpcSignalUndetectedMessage);t&&(hideLoader(!1),document.getElementById("form-fields").style.display="none",document.getElementById("proceed-to-dsr-request").style.display="none",processPostedDataToClaripDNSSForm(e))}document.addEventListener("DOMContentLoaded",(function(){closeDnsManager(),populateStateDropdownValues(),enableOptInWorkflow&&addFormSubmitButtonEventListeners(),addFormEventListeners(),enableTpcSection&&(addThirdPartyCookieSectionToggleHandler(),fetchCookieDetails())})),window.addEventListener("message",receiveMessageFromParent,!1);